<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home | FiTech ‚Ä¢ AI-Powered Predictive Fitness System</title>
  <link rel="stylesheet" href="/public/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
  :root{
  --bg: #0f1724;        
  --surface: #111827;   
  --muted: #94a3b8;     
  --accent: #ff6b00;    
  --accent-2: #00d084;  
  --glass: rgba(255,255,255,0.03);
  --card-radius: 12px;
  --container-width: 1200px;
}

html {
  height: 100%;
}

body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: #071021 url('https://png.pngtree.com/thumb_back/fh260/background/20230630/pngtree-dark-fitness-room-with-training-equipment-and-black-dumbbells-on-the-image_3698810.jpg') no-repeat center center fixed;
  background-size: cover;
  color: #e6eef8;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.45;
  min-height: 100%;
  display: flex;
  flex-direction: column;
}

.custom-select {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  background: rgba(0,0,0,0.3);
  border: 1px solid rgba(99, 102, 241, 0.3);
  color: #fff;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;

  /* Remove default browser styling */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;

  /* Add space for custom arrow */
  padding-right: 40px; 
  position: relative;
}

.custom-select:hover {
  border-color: rgba(139, 92, 246, 0.5);
  background: rgba(0,0,0,0.4);
}

.custom-select:focus {
  outline: none;
  border-color: #8b5cf6;
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
}

/* Style dropdown options for contrast */
.custom-select option {
  background: #1a2332;
  color: #fff;
  padding: 12px;
}

.custom-select option:hover,
.custom-select option:focus,
.custom-select option:checked {
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  color: #fff;
}

.custom-select option:disabled {
  color: #6b7280;
  background: #0f1724;
}

/* Add a custom down arrow */
.custom-select-wrapper {
  position: relative;
}

.custom-select-wrapper::after {
  content: "‚ñº";
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  color: #8b5cf6;
  font-size: 10px;
  transition: transform 0.2s ease;
}


/* Optional: subtle dark overlay to improve text readability over the gym background */
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(7, 16, 33, 0.75); /* Dark tint matching your original gradient */
  pointer-events: none;
  z-index: -1;
}

.container{
  width:94%;
  margin:auto;
  padding:13px;
  justify-content: space-between;
}

header{
  width: 100%;
  top:0;
  backdrop-filter: blur(6px);
  background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-bottom: 1px solid rgba(255,255,255,0.03);
  z-index:50;
  transition: transform 0.35s ease;
}

header.hide {
  transform: translateY(-100%);
}

header .container {
  display: flex;
  align-items: center;
  justify-content: space-between; /* pushes logo left, nav right */
}

header h1{font-size:29px;margin:0;display:flex;align-items:center;gap:12px;color:#fff;}
header h1 .brand-icon{background:linear-gradient(135deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;color:transparent;font-size:20px}
nav{margin-left:0}
nav ul{list-style:none;margin:0;padding:0;display:flex;gap:20px}
nav a{color:var(--muted);text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:600; font-size: 16px;}
nav a:hover{color:#fff;background:rgba(255,255,255,0.03)}

.menu-toggle{display:none;background:transparent;border:none;color:var(--muted);font-size:18px}

main{
  padding:20px 0 60px;
  flex: 1 0 auto;
}

.hero-section{display:flex; align-items: flex-start; margin-bottom: 40px;}
.hero-section h2{font-size:32px;margin:0 0 16px;color:#fff; line-height: 1.3;}
.hero-section p{color:var(--muted);margin:0 0 24px; font-size: 16px;}

.hero-card{background:var(--surface);padding:28px;border-radius:var(--card-radius);box-shadow: 0 6px 18px rgba(3,10,18,0.6);border:1px solid rgba(255,255,255,0.02)}

/* Introduction Section */
.intro-section {
  margin-bottom: 30px;
  text-align: left;
}

.intro-features {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin-bottom: 30px;
}

.intro-feature-item {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.04));
  padding: 20px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.03);
  text-align: center;
  transition: all 0.25s ease;
}

.intro-feature-item:hover {
  transform: translateY(-4px);
  background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.06));
  border-color: rgba(255,107,0,0.15);
}

.intro-icon {
  width: 50px;
  height: 50px;
  margin: 0 auto 12px;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.intro-icon i {
  font-size: 22px;
  color: #fff;
}

.intro-feature-item h4 {
  margin: 0 0 8px;
  color: #fff;
  font-size: 15px;
  font-weight: 600;
}

.intro-feature-item p {
  margin: 0;
  color: var(--muted);
  font-size: 13px;
  line-height: 1.5;
}

/* How It Works Section */
.how-it-works {
  background: rgba(0,0,0,0.15);
  padding: 24px;
  border-radius: 12px;
  margin-bottom: 24px;
}

.how-it-works h3 {
  margin: 0 0 20px;
  color: #fff;
  font-size: 18px;
  display: flex;
  align-items: center;
  gap: 10px;
  justify-content: center;
}

.how-it-works h3 i {
  color: var(--accent);
}

/* Get Started Button */
.get-started-btn {
  padding: 16px 48px;
  font-size: 18px;
  margin-top: 10px;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(255,107,0,0.3);
}

.get-started-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(255,107,0,0.4);
}

.get-started-btn i {
  font-size: 18px;
}

.steps-container {
  display: flex;
  gap: 16px;
}

.step-item {
  flex: 1;
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: rgba(255,255,255,0.02);
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.03);
}

.step-number {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 14px;
  color: #fff;
  flex-shrink: 0;
}

.step-content h5 {
  margin: 0 0 6px;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
}

.step-content p {
  margin: 0;
  color: var(--muted);
  font-size: 12px;
  line-height: 1.4;
}

.feature-grid{display:flex;flex-direction:column;gap:12px}
.feature-card{
  display:flex;
  align-items:center;
  gap:16px;
  padding:18px;
  border-radius:10px;
  background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
  border:1px solid rgba(255,255,255,0.02);
  cursor:pointer;
  transition: all 0.25s ease;
}
.feature-card:hover {
  background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.08));
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  border-color: rgba(255,107,0,0.2);
}
.feature-card:hover i {
  color: var(--accent-2);
  transform: scale(1.15);
  transition: all 0.25s ease;
}
.feature-card i{font-size:24px;color:var(--accent); transition: all 0.25s ease;}
.feature-card h3{margin:0;color:#fff;font-size:18px}
.feature-card p{margin:8px 0 0;color:var(--muted);font-size:14px}

.upload-area{
  margin-top:0;
  padding:28px;
  border-radius:var(--card-radius);
  background: linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.1));
  border:1px solid rgba(255,255,255,0.05);
  backdrop-filter: blur(10px);
}

/* Form field group styling */
.form-field {
  margin-top: 20px;
}

.form-field label {
  display: block;
  color: var(--muted);
  margin-bottom: 8px;
  font-size: 14px;
  font-weight: 500;
}

/* Progress indicator */
.form-progress {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-bottom: 24px;
}

.form-progress-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255,255,255,0.15);
  transition: all 0.3s ease;
}

.form-progress-dot.active {
  background: var(--accent);
  box-shadow: 0 0 8px rgba(255,107,0,0.5);
}

.btn{
  display:inline-flex;
  align-items:center;
  justify-content: center;
  gap:8px;
  padding:12px 18px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.03);
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  font-weight: 600;
  transition: all 0.25s ease;
}
.btn:disabled{opacity:0.5;cursor:not-allowed}
.primary-btn{
  background:linear-gradient(90deg,var(--accent),#ff9b57);
  color:#071021;
  border:none;
}
.primary-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(255,107,0,0.3);
}
.success-btn{
  background: linear-gradient(180deg, var(--accent-2), hsl(150, 70%, 45%));
  filter: brightness(0.7);
  color:#04281a;
  border:none;
}
.success-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0,215,132,0.1);
}

.image-preview-container{margin-top:16px;display:flex;flex-direction:column;align-items:center;gap:10px}

.image-preview-wrapper {
  position: relative;
  display: inline-block;
  width: 100%;
  text-align: center;
}

.remove-image-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(220, 53, 69, 0.9);
  border: none;
  color: #fff;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

.remove-image-btn:hover {
  background: #dc3545;
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
}

.remove-image-btn i {
  font-size: 14px;
}

/* Body Type Description Styles */
.body-type-desc {
  margin-top: 16px;
  padding: 20px;
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
  border: 1px solid rgba(139, 92, 246, 0.25);
  border-radius: 12px;
  text-align: left;
}

.body-type-desc-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.body-type-emoji {
  font-size: 28px;
}

.body-type-name {
  font-size: 20px;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, #8b5cf6, #a78bfa);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.body-type-summary {
  color: var(--muted);
  font-size: 14px;
  line-height: 1.6;
  margin: 0 0 16px 0;
}

.body-type-tips {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.tip-card {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 14px;
  background: rgba(0,0,0,0.2);
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.05);
}

.tip-icon {
  font-size: 20px;
  flex-shrink: 0;
}

.tip-content {
  flex: 1;
}

.tip-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--accent-2);
  display: block;
  margin-bottom: 4px;
}

.tip-content p {
  margin: 0;
  font-size: 13px;
  color: var(--muted);
  line-height: 1.5;
}

#imagePreview{max-width:100%;border-radius:8px;border:1px solid rgba(255,255,255,0.03)}
#previewPlaceholder{color:var(--muted);padding:40px 20px;border-radius:8px;background:rgba(0,0,0,0.12);width:100%;text-align:center; cursor: pointer; transition: background 0.2s ease;}
#previewPlaceholder:hover{background:rgba(0,0,0,0.18)}

.results-area{margin-top:0;padding:24px;border-radius:12px;background:linear-gradient(180deg, rgba(0,0,0,0.15), rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.02)}
.result-item{margin-bottom:16px}
.result-item strong{color:#fff}
.result-description p{color:var(--muted)}

.history-section{margin-top:40px; max-width: 800px;}
.history-list{display:flex;flex-direction:column;gap:12px}
.history-item{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));padding:16px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
.history-item .history-item-header{display:flex;justify-content:space-between;align-items:center}

footer {
  padding: 30px 0 20px;
  border-top: 1px solid rgba(255,255,255,0.03);
  margin-top: auto;
  color: var(--muted);
  flex-shrink: 0;
}

.footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.footer-brand {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.footer-logo {
  font-size: 20px;
  font-weight: 700;
  color: #fff;
}

.footer-logo i {
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  margin-right: 8px;
}

.footer-brand p {
  margin: 0;
  font-size: 13px;
  color: var(--muted);
}

.footer-links {
  display: flex;
  gap: 24px;
}

.footer-links a {
  color: var(--muted);
  text-decoration: none;
  font-size: 14px;
  transition: color 0.2s ease;
}

.footer-links a:hover {
  color: #fff;
}

.footer-copyright {
  text-align: center;
  font-size: 13px;
  padding-top: 20px;
  border-top: 1px solid rgba(255,255,255,0.03);
  margin: 0;
}

/* Spinner styles */
.spinner-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px;
}

.spinner-container svg {
  width: 60px;
  height: 60px;
  margin-bottom: 16px;
}

.spinner-container p {
  color: var(--muted);
  font-size: 14px;
}

/* Responsive */
@media (max-width:900px){
  .hero-section{display:block;}
  nav{display:none}
  .menu-toggle{display:inline-flex}
  .container{width:96%;}
  
  .hero-card {
    max-width: 100% !important;
    margin-left: 0 !important;
  }
  
  .intro-features {
    grid-template-columns: 1fr;
    gap: 12px;
  }
  
  .steps-container {
    flex-direction: column;
    gap: 12px;
  }
  
  .how-it-works {
    padding: 20px 16px;
  }
  
  .trust-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
}

@media (max-width: 600px) {
  .intro-feature-item {
    padding: 16px;
  }
  
  .intro-icon {
    width: 42px;
    height: 42px;
  }
  
  .intro-icon i {
    font-size: 18px;
  }
  
  .step-item {
    padding: 12px;
  }
  
  .step-number {
    width: 28px;
    height: 28px;
    font-size: 12px;
  }
}
</style>


</head>

<body>
  <header>
    <div class="container">
      <button class="menu-toggle"><i class="fas fa-bars"></i></button>
      <a style="color: #fff;text-decoration: none;display:flex;align-items:center;gap:12px;" href="#">
        <h1>
          <span class="brand-icon"><i class="fas fa-dumbbell"></i></span>
          <span style="color:#fff; font-weight:700;">FiTech</span>
          <small style="color:var(--muted); font-weight:600; font-size:16px; margin: auto">‚Ä¢ A Fitness Partner Powered by AI</small>
        </h1>
      </a>
      <nav>
        <ul id="navMenu">
          <li><a href="#" data-target="home">Home</a></li>
          <li><a href="#" data-target="history">History</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="home" class="hero-section">
      <div class="hero-card" style="width: 800px; text-align: center; margin: auto;">
        <h2 style="font-size: 32px; margin-bottom: 16px;">Train Smarter with FiTech</h2>
        <p style="font-size: 16px; line-height: 1.6; margin-bottom: 30px;">Upload a full-body image to get your personalized fitness plan powered by machine learning.</p>

        <!-- Introduction Section -->
        <div class="intro-section">
          <!-- Features Grid -->
          <div class="intro-features">
            <div class="intro-feature-item">
              <div class="intro-icon"><i class="fas fa-brain"></i></div>
              <h4>AI-Powered Analysis</h4>
              <p>Our machine learning model analyzes your body type and helps create the perfect fitness plan tailored just for you.</p>
            </div>
            <div class="intro-feature-item">
              <div class="intro-icon"><i class="fas fa-chart-line"></i></div>
              <h4>Track Your Progress</h4>
              <p>Monitor your fitness journey with our history feature and see how far you've come.</p>
            </div>
            <div class="intro-feature-item">
              <div class="intro-icon"><i class="fas fa-utensils"></i></div>
              <h4>Custom Diet Plans</h4>
              <p>Get personalized nutrition recommendations based on your body type and fitness goals.</p>
            </div>
          </div>

          <!-- How It Works -->
          <div class="how-it-works">
            <h3><i class="fas fa-question-circle"></i> How It Works</h3>
            <div class="steps-container">
              <div class="step-item">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h5>Upload Your Photo</h5>
                  <p>Take a full-body photo and upload it to our secure system.</p>
                </div>
              </div>
              <div class="step-item">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h5>AI Analysis</h5>
                  <p>Our AI identifies your body type (Ectomorph, Mesomorph, or Endomorph).</p>
                </div>
              </div>
              <div class="step-item">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h5>Get Your Plan</h5>
                  <p>Receive a personalized workout and diet plan based on your goals.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Get Started Button -->
        <button id="getStartedBtn" class="btn primary-btn get-started-btn">
          <i class="fas fa-rocket"></i> Get Started
        </button>

        <!-- Hidden File Input -->
        <input type="file" id="imageInput" accept="image/jpeg,image/jpg,image/png" style="display: none;">

        <!-- Upload Area (Initially Hidden) -->
        <div id="uploadArea" class="upload-area" style="display: none; margin: auto; max-width: 500px;">
          <p style="color:var(--muted); margin-bottom: 16px;">Select a full-body image for analysis:</p>
          
          <div class="image-preview-container">
            <div id="loadingSpinner" class="spinner-container" style="display: none;">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><linearGradient id="a12"><stop offset="0" stop-color="#28A745" stop-opacity="0"></stop><stop offset="1" stop-color="#28A745"></stop></linearGradient><circle fill="none" stroke="url(#a12)" stroke-width="15" stroke-linecap="round" stroke-dasharray="0 44 0 44 0 44 0 44 0 360" cx="100" cy="100" r="70" transform-origin="center"><animateTransform type="rotate" attributeName="transform" calcMode="discrete" dur="2" values="360;324;288;252;216;180;144;108;72;36" repeatCount="indefinite"></animateTransform></circle></svg>
              <p>Analyzing...</p>
            </div>

            <div class="image-preview-wrapper" style="display: none;">
              <img id="imagePreview" style="max-width: 100%; max-height: 300px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.03);">
              <button type="button" id="removeImageBtn" class="remove-image-btn" title="Remove image">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
            <p id="previewPlaceholder" style="color:var(--muted); padding: 40px 20px; border-radius: 8px; background: rgba(0,0,0,0.12); width: 100%; text-align: center;">No image selected</p>
          </div>

          <!-- Analyze Image Button (Step 1) -->
          <button id="analyzeImageBtn" class="btn success-btn" style="width: 100%; margin-top: 24px; padding: 14px;" disabled>
            <i class="fas fa-camera"></i> Analyze Image
          </button>

          <!-- Analysis Result Display -->
          <div id="analysisResult" style="display: none; margin-top: 20px; padding: 16px; background: rgba(0, 208, 132, 0.1); border: 1px solid rgba(0, 208, 132, 0.3); border-radius: 8px;">
            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
              <i class="fas fa-check-circle" style="color: var(--accent-2); font-size: 20px;"></i>
              <span style="color: #fff; font-weight: 600;">Analysis Complete!</span>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
              <div>
                <span style="font-size: 12px; color: var(--muted);">Body Type:</span>
                <div style="color: #fff; font-weight: 600;" id="detectedBodyType">-</div>
              </div>
              <div>
                <span style="font-size: 12px; color: var(--muted);">Confidence:</span>
                <div style="color: #fff; font-weight: 600;" id="detectedConfidence">-</div>
              </div>
            </div>
          </div>

          <!-- Body Type Description (shown after analysis) -->
          <div id="bodyTypeDescription" class="body-type-desc" style="display: none;">
            <div class="body-type-desc-header">
              <span class="body-type-emoji" id="bodyTypeEmoji">üßç‚Äç‚ôÇÔ∏è</span>
              <span class="body-type-name" id="bodyTypeName">Body Type</span>
            </div>
            <p class="body-type-summary" id="bodyTypeSummary">Description here</p>
            <div class="body-type-tips">
              <div class="tip-card">
                <div class="tip-icon">üèãÔ∏è</div>
                <div class="tip-content">
                  <span class="tip-label">Training Tip:</span>
                  <p id="trainingTip">Training advice here</p>
                </div>
              </div>
              <div class="tip-card">
                <div class="tip-icon">ü•ó</div>
                <div class="tip-content">
                  <span class="tip-label">Diet Tip:</span>
                  <p id="dietTip">Diet advice here</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Survey Section (Initially Hidden - shown after successful analysis) -->
          <div id="surveySection" style="display: none;">
            <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.05);">
              <p style="color: var(--muted); margin-bottom: 20px; font-size: 14px;"><i class="fas fa-clipboard-list" style="margin-right: 8px; color: var(--accent);"></i>Now, tell us about your fitness preferences:</p>
              
              <!-- Fitness Goal -->
              <div style="margin-top: 16px;">
                <label style="display: block; color: var(--muted); margin-bottom: 8px; font-size: 14px;">Fitness Goal:</label>
                <div class="custom-select-wrapper">
                  <select id="goalSelect" class="custom-select" required>
                    <option value="" selected disabled hidden>Select an option</option>
                    <option value="Muscle Gain">Muscle Gain</option>
                    <option value="Fat Loss">Fat Loss</option>
                    <option value="Maintenance">Maintenance</option>
                  </select>
                </div>
              </div>

              <!-- Duration (weeks) -->
              <div style="margin-top: 16px;">
                <label style="display: block; color: var(--muted); margin-bottom: 8px; font-size: 14px;">Duration (weeks):</label>
                <div class="custom-select-wrapper">
                  <select id="durationSelect" class="custom-select" required>
                    <option value="" selected disabled hidden>Select an option</option>
                    <option value="4">4 weeks</option>
                    <option value="8">8 weeks</option>
                    <option value="12">12 weeks</option>
                  </select>
                </div>
              </div>

              <!-- Fitness Level -->
              <div style="margin-top: 16px;">
                <label style="display: block; color: var(--muted); margin-bottom: 8px; font-size: 14px;">Fitness Level:</label>
                <div class="custom-select-wrapper">
                  <select id="levelSelect" class="custom-select" required>
                    <option value="" selected disabled hidden>Select an option</option>
                    <option value="Beginner">Beginner</option>
                    <option value="Intermediate">Intermediate</option>
                    <option value="Advanced">Advanced</option>
                  </select>
                </div>
              </div>

              <!-- Workout Location -->
              <div style="margin-top: 16px;">
                <label style="display: block; color: var(--muted); margin-bottom: 8px; font-size: 14px;">Workout Location:</label>
                <div class="custom-select-wrapper">
                  <select id="locationSelect" class="custom-select" required>
                    <option value="" selected disabled hidden>Select an option</option>
                    <option value="Home">Home</option>
                    <option value="Gym">Gym</option>
                  </select>
                </div>
              </div>

              <!-- Number of Training Days per Week -->
              <div style="margin-top: 16px;">
                <label style="display: block; color: var(--muted); margin-bottom: 8px; font-size: 14px;">Training Days per Week:</label>
                <div class="custom-select-wrapper">
                  <select id="trainingDaysSelect" class="custom-select" required>
                    <option value="" selected disabled hidden>Select an option</option>
                    <option value="2">2 days</option>
                    <option value="3">3 days</option>
                    <option value="4">4 days</option>
                    <option value="5">5 days</option>
                    <option value="6">6 days</option>
                    <option value="7">7 days</option>
                  </select>
                </div>
              </div>

              <!-- Dietary Restrictions -->
              <div style="margin-top: 16px;">
                <label style="display: block; color: var(--muted); margin-bottom: 8px; font-size: 14px;">Dietary Restrictions:</label>
                <div class="custom-select-wrapper">
                  <select id="dietarySelect" class="custom-select" required>
                    <option value="" selected disabled hidden>Select an option</option>
                    <option value="None">None</option>
                    <option value="Vegetarian">Vegetarian</option>
                    <option value="Vegan">Vegan</option>
                    <option value="Gluten-free">Gluten-free</option>
                    <option value="Other">Other</option>
                  </select>
                </div>
              </div>

              <button id="generatePlanBtn" class="btn success-btn" style="width: 100%; margin-top: 24px; padding: 14px;">
                <i class="fas fa-magic"></i> Generate My Plan
              </button>
            </div>
          </div>
        </div>

        <!-- Results Section (Initially Hidden) -->
        <div id="resultsSection" class="results-area" style="display: none; margin-top: 24px; max-width: 500px;">
          <h3 style="color: #fff; margin-top: 0; margin-bottom: 20px;">Your Personalized Fitness Plan</h3>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
            <div class="result-item">
              <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Body Type</div>
              <div style="font-weight: 600; color: #fff;" id="bodyTypeResult">-</div>
            </div>
            <div class="result-item">
              <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Confidence</div>
              <div style="font-weight: 600; color: #fff;" id="confidenceResult">-</div>
            </div>
            <div class="result-item">
              <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Plan Level</div>
              <div style="font-weight: 600; color: #fff;" id="planLevel">-</div>
            </div>
            <div class="result-item">
              <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Duration</div>
              <div style="font-weight: 600; color: #fff;" id="planDuration">-</div>
            </div>
          </div>

          <div class="result-item" style="margin-bottom: 16px;">
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Location</div>
            <div style="font-weight: 600; color: #fff;" id="planLocation">-</div>
          </div>

          <div class="result-item" style="margin-bottom: 16px;">
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Exercises</div>
            <div style="color: var(--muted); font-size: 14px;" id="planExercises">-</div>
          </div>

          <div class="result-item" style="margin-bottom: 20px;">
            <div style="font-size: 12px; color: var(--muted); margin-bottom: 4px;">Diet Plan</div>
            <div style="color: var(--muted); font-size: 14px;" id="planDiet">-</div>
          </div>

          <div style="background: rgba(0,0,0,0.1); padding: 12px; border-radius: 8px; margin-bottom: 20px; display: none;" id="fallbackNotice">
            <i class="fas fa-info-circle" style="color: #ff6b00; margin-right: 8px;"></i>
            <span style="font-size: 13px; color: var(--muted);">Using a fallback plan. A custom plan for your specific body type and goal combination will be available soon.</span>
          </div>

          <button class="btn primary-btn" style="width: 100%;" onclick="resetForm()">
            <i class="fas fa-redo"></i> New Analysis
          </button>
        </div>
      </div>
    </section>

    <section id="history" class="history-section">
      <h2>Previous Workouts</h2>
      <div id="historyList" class="history-list"></div>
      <p id="noHistoryMessage" style="display:none; text-align:center; color:var(--muted)">No previous workouts found.</p>
    </section>
    <button id="loadMoreBtn" class="btn" style="display: none; margin: 20px auto 0;">Show More</button>

  </main>


  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <span class="footer-logo"><i class="fas fa-dumbbell"></i> FiTech</span>
          <p>AI-Powered Predictive Fitness System</p>
        </div>
      </div>
      <p class="footer-copyright">&copy; 2026 FiTech. All rights reserved.</p>
    </div>
  </footer>

  <script src="script.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  // Navigation
  const navMenu = document.getElementById("navMenu");
  
  document.querySelectorAll("#navMenu a[data-target]").forEach((menuItem) => {
    menuItem.addEventListener("click", function (e) {
      e.preventDefault();
      const targetId = this.getAttribute("data-target");
      const targetSection = document.getElementById(targetId);
      
      if (targetSection) {
        targetSection.scrollIntoView({ behavior: "smooth" });
      }
      
      if (navMenu.classList.contains("show")) {
        navMenu.classList.remove("show");
      }
    });
  });

  // Menu toggle
  document.querySelector(".menu-toggle")?.addEventListener("click", function() {
    navMenu.classList.toggle("show");
  });

  // Get Started Button
  const getStartedBtn = document.getElementById("getStartedBtn");
  if (getStartedBtn) {
    getStartedBtn.addEventListener("click", function () {
      document.getElementById("uploadArea").style.display = "block";
      document.querySelector(".intro-section").style.display = "none";
      this.style.display = "none";
    });
  }

  // File upload handling
  const imageInput = document.getElementById("imageInput");
  const analyzeBtn = document.getElementById("analyzeImageBtn");
  const previewPlaceholder = document.getElementById("previewPlaceholder");

  if (imageInput) {
    imageInput.addEventListener("change", function () {
      const file = this.files[0];
      if (!file) return;
      
      // Validate file type
      const validTypes = ["image/jpeg", "image/jpg", "image/png"];
      if (!validTypes.includes(file.type)) {
        alert("Please upload a JPG or PNG image.");
        this.value = "";
        return;
      }
      
      // Preview image
      const reader = new FileReader();
      reader.onload = function (e) {
        document.getElementById("imagePreview").src = e.target.result;
        document.querySelector(".image-preview-wrapper").style.display = "block";
        previewPlaceholder.style.display = "none";
        analyzeBtn.disabled = false;
      };
      reader.readAsDataURL(file);
    });
  }

  // Click placeholder to upload
  if (previewPlaceholder) {
    previewPlaceholder.addEventListener("click", () => {
      imageInput.click();
    });
  }

  // Remove image button
  document.getElementById("removeImageBtn")?.addEventListener("click", (e) => {
    e.stopPropagation();
    document.querySelector(".image-preview-wrapper").style.display = "none";
    previewPlaceholder.style.display = "block";
    imageInput.value = "";
    analyzeBtn.disabled = true;
  });

  // Global storage for analysis data
  window.analysisData = null;

  // Analyze Image Button
  if (analyzeBtn) {
    analyzeBtn.addEventListener("click", async function () {
      const fileInput = document.getElementById("imageInput");
      if (!fileInput.files[0]) {
        alert("Please select an image first.");
        return;
      }
      
      analyzeBtn.disabled = true;
      document.getElementById("loadingSpinner").style.display = "flex";
      
      const formData = new FormData();
      formData.append("image", fileInput.files[0]);
      
      try {
        console.log("Uploading image to /api/analyze...");
        const response = await fetch("/api/analyze", {
          method: "POST",
          body: formData
        });
        
        const data = await response.json();
        console.log("Analysis response:", data);
        
        if (!response.ok) {
          throw new Error(data.error || `Analysis failed with status ${response.status}`);
        }
        
        // Store analysis data globally
        window.analysisData = data;
        
        // Show analysis results
        document.getElementById("detectedBodyType").textContent = 
          data.predicted_body_type || "Unknown";
        document.getElementById("detectedConfidence").textContent = 
          `${(data.confidence * 100).toFixed(1)}%`;
        
        // Show body type description
        showBodyTypeDescription(data.predicted_body_type);
        
        document.getElementById("analysisResult").style.display = "block";
        document.getElementById("surveySection").style.display = "block";
        analyzeBtn.style.display = "none";
        
      } catch (error) {
        console.error("Analysis error:", error);
        alert(`Analysis failed: ${error.message}`);
        analyzeBtn.disabled = false;
      } finally {
        document.getElementById("loadingSpinner").style.display = "none";
      }
    });
  }

  // Generate Plan Button
  const generatePlanBtn = document.getElementById("generatePlanBtn");
  if (generatePlanBtn) {
    generatePlanBtn.addEventListener("click", async function () {
      if (!window.analysisData) {
        alert("Please analyze an image first.");
        return;
      }
      
      // Validate all required fields
      const requiredFields = [
        "goalSelect",
        "durationSelect",
        "levelSelect",
        "locationSelect",
        "trainingDaysSelect",
        "dietarySelect"
      ];
      
      for (const fieldId of requiredFields) {
        const field = document.getElementById(fieldId);
        if (!field || !field.value) {
          alert(`Please complete all survey fields. Missing: ${fieldId}`);
          return;
        }
      }
      
      // Prepare payload
      const payload = {
        body_type: window.analysisData.predicted_body_type,
        goal: document.getElementById("goalSelect").value,
        duration: parseInt(document.getElementById("durationSelect").value),
        user_id: 1
      };
      
      // Show loading state
      generatePlanBtn.disabled = true;
      const originalText = generatePlanBtn.innerHTML;
      generatePlanBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
      
      try {
        console.log("Generating plan with payload:", payload);
        const response = await fetch("/api/generate-plan", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(payload)
        });
        
        const planData = await response.json();
        console.log("Plan response:", planData);
        
        if (!response.ok) {
          throw new Error(planData.error || `Plan generation failed with status ${response.status}`);
        }
        
        // Display the plan
        document.getElementById("bodyTypeResult").textContent = 
          planData.body_type || "Unknown";
        document.getElementById("confidenceResult").textContent = 
          `${(window.analysisData.confidence * 100).toFixed(1)}%`;
        document.getElementById("planLevel").textContent = 
          planData.level || "Beginner";
        document.getElementById("planDuration").textContent = 
          `${planData.duration_weeks || 4} weeks`;
        document.getElementById("planLocation").textContent = 
          planData.location || "Home";
        document.getElementById("planExercises").textContent = 
          planData.exercises || "No exercises specified";
        document.getElementById("planDiet").textContent = 
          planData.diet || "No diet plan specified";
        
        // Show fallback notice if used
        if (planData.fallback_used) {
          document.getElementById("fallbackNotice").style.display = "block";
        }
        
        // Show results and hide upload area
        document.getElementById("uploadArea").style.display = "none";
        document.getElementById("resultsSection").style.display = "block";
        
        // Scroll to results
        setTimeout(() => {
          document.getElementById("resultsSection").scrollIntoView({ 
            behavior: "smooth", 
            block: "start" 
          });
        }, 100);
        
      } catch (error) {
        console.error("Plan generation error:", error);
        alert(`Failed to generate plan: ${error.message}`);
      } finally {
        // Restore button state
        generatePlanBtn.disabled = false;
        generatePlanBtn.innerHTML = originalText;
      }
    });
  }

  // Reset function
  window.resetForm = function() {
    // Show intro and get started button
    document.querySelector(".intro-section").style.display = "block";
    document.getElementById("getStartedBtn").style.display = "inline-flex";
    
    // Hide upload and results sections
    document.getElementById("uploadArea").style.display = "none";
    document.getElementById("resultsSection").style.display = "none";
    document.getElementById("analysisResult").style.display = "none";
    document.getElementById("surveySection").style.display = "none";
    document.getElementById("fallbackNotice").style.display = "none";
    document.getElementById("bodyTypeDescription").style.display = "none";
    
    // Reset image preview
    document.querySelector(".image-preview-wrapper").style.display = "none";
    previewPlaceholder.style.display = "block";
    imageInput.value = "";
    analyzeBtn.disabled = true;
    analyzeBtn.style.display = "block";
    
    // Reset form fields
    ["goalSelect", "durationSelect", "levelSelect", "locationSelect", 
     "trainingDaysSelect", "dietarySelect"].forEach(id => {
      const element = document.getElementById(id);
      if (element) element.selectedIndex = 0;
    });
    
    // Clear analysis data
    window.analysisData = null;
    
    // Scroll to top
    window.scrollTo({ top: 0, behavior: "smooth" });
  };

  // Body type description data and function
  function showBodyTypeDescription(bodyType) {
    const descriptions = {
      "Ektomorf": {
        emoji: "üßç‚Äç‚ôÇÔ∏è",
        name: "Ectomorph",
        summary: "Lean build, fast metabolism. You stay slim easily but may struggle to gain muscle.",
        training: "Focus on strength training with heavier weights and fewer reps.",
        diet: "Eat more calories and protein to support muscle growth."
      },
      "Mezomorf": {
        emoji: "üí™",
        name: "Mesomorph",
        summary: "Naturally athletic and muscular. You gain muscle easily and respond well to most workouts.",
        training: "Mix strength and cardio for balanced results.",
        diet: "Maintain a balanced diet with enough protein and carbs."
      },
      "Endomorf": {
        emoji: "üî•",
        name: "Endomorph",
        summary: "Broader build, stores fat easily. You gain strength well but may struggle with fat loss.",
        training: "Combine strength training with regular cardio.",
        diet: "Focus on portion control, protein, and whole foods."
      }
    };

    const desc = descriptions[bodyType];
    if (desc) {
      document.getElementById("bodyTypeEmoji").textContent = desc.emoji;
      document.getElementById("bodyTypeName").textContent = desc.name;
      document.getElementById("bodyTypeSummary").textContent = desc.summary;
      document.getElementById("trainingTip").textContent = desc.training;
      document.getElementById("dietTip").textContent = desc.diet;
      document.getElementById("bodyTypeDescription").style.display = "block";
    } else {
      document.getElementById("bodyTypeDescription").style.display = "none";
    }
  }
});

// Scroll-aware header
let lastScroll = 0;
window.addEventListener('scroll', () => {
  const currentScroll = window.pageYOffset;
  const header = document.querySelector('header');
  
  if (!header) return;
  
  if (currentScroll <= 0) {
    header.classList.remove('hide');
    return;
  }
  
  if (currentScroll > lastScroll && !header.classList.contains('hide')) {
    header.classList.add('hide');
  } else if (currentScroll < lastScroll && header.classList.contains('hide')) {
    header.classList.remove('hide');
  }
  
  lastScroll = currentScroll;
});

// Test backend connection on load
window.addEventListener('load', async () => {
  try {
    const response = await fetch('/api/health');
    if (response.ok) {
      const data = await response.json();
      console.log('‚úÖ Backend connected:', data);
    } else {
      console.warn('‚ö†Ô∏è Backend health check failed');
    }
  } catch (error) {
    console.error('‚ùå Cannot connect to backend:', error);
  }
});
</script>

</body>
</html>